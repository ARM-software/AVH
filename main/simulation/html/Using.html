<!-- HTML header for doxygen 1.9.2-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Simulation: Using Arm Fixed Virtual Platforms</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="printComponentTabs.js"></script>
<script type="text/javascript" src="footer.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="$extra_stylesheet" rel="stylesheet" type="text/css" />
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 55px;">
  <td id="projectlogo" style="padding: 1em;"><img alt="Logo" src="arm.png"/></td>
  <td style="padding-left: 2em; padding-bottom: 1em;padding-top: 1em;">
   <div id="projectname">Virtual Hardware
   &#160;<span id="projectnumber">Version 1.3.1 - beta</span>
   </div>
   <div id="projectbrief">Simulation Models with Virtual Interfaces for Test Automation</div>
  </td>
  <!--END !PROJECT_NAME-->
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="Compnav" class="tabs1">
    <ul class="tablist">
      <script type="text/javascript">
		<!--
		writeComponentTabs.call(this);
		//-->
      </script>
	  </ul>
</div>
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('Using.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Using Arm Fixed Virtual Platforms </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >This section describes how to use the <b>Arm Fixed Virtual Platforms (FVPs)</b>.</p>
<p >The FVP simulation models in AVH context correspond to the <a href="https://developer.arm.com/tools-and-software/simulation-models/fixed-virtual-platforms">Arm Fast Models Fixed Virtual Platforms</a> with extensions for <a class="el" href="group__arm__cmvp.html">Virtual Interfaces</a>. The table below shows the available models:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">FVP Simulation Model   </th><th class="markdownTableHeadLeft">Processor Core   </th><th class="markdownTableHeadLeft">Overview Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">VHT_MPS2_Cortex-M0   </td><td class="markdownTableBodyLeft">Cortex-M0   </td><td class="markdownTableBodyLeft"><a href="https://developer.arm.com/documentation/dai0382">ARM Cortex-M0 SMM on V2M-MPS2 (AppNote AN382)</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">VHT_MPS2_Cortex-M0plus   </td><td class="markdownTableBodyLeft">Cortex-M0+   </td><td class="markdownTableBodyLeft"><a href="https://developer.arm.com/documentation/dai0383">ARM Cortex-M0+ SMM on V2M-MPS2 (AppNote AN383)</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">VHT_MPS2_Cortex-M3   </td><td class="markdownTableBodyLeft">Cortex-M3   </td><td class="markdownTableBodyLeft"><a href="https://developer.arm.com/documentation/dai0385">ARM Cortex-M3 SMM on V2M-MPS2 (AppNote AN385)</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">VHT_MPS2_Cortex-M4   </td><td class="markdownTableBodyLeft">Cortex-M4   </td><td class="markdownTableBodyLeft"><a href="https://developer.arm.com/documentation/dai0386">ARM Cortex-M4 SMM on V2M-MPS2 (AppNote AN386)</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">VHT_MPS2_Cortex-M7   </td><td class="markdownTableBodyLeft">Cortex-M7   </td><td class="markdownTableBodyLeft"><a href="https://developer.arm.com/documentation/dai0386">ARM Cortex-M7 SMM on V2M-MPS2 (AppNote AN399)</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">VHT_MPS2_Cortex-M23   </td><td class="markdownTableBodyLeft">Cortex-M23   </td><td class="markdownTableBodyLeft"><a href="https://developer.arm.com/documentation/dai0519">ARM Cortex-M23 IoT Subsystem for V2M-MPS2+ (AppNote AN519)</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">VHT_MPS2_Cortex-M33   </td><td class="markdownTableBodyLeft">Cortex-M33   </td><td class="markdownTableBodyLeft"><a href="https://developer.arm.com/documentation/dai0505">ARM Cortex-M33 IoT Subsystem for V2M-MPS2+ (AppNote AN505)</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">VHT_MPS3_Corstone_SSE-300   </td><td class="markdownTableBodyLeft">Cortex-M55   </td><td class="markdownTableBodyLeft"><a href="./Corstone_SSE-300_Ethos-U55_FVP_MPS3_Technical_Overview.pdf">Corstone-300 FVP Technical Overview (PDF)</a>, <a href="https://developer.arm.com/documentation/100966/1118/Arm--Corstone-SSE-300-FVP/Memory-map-overview-for-Corstone-SSE-300">Memory map overview</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">VHT_Corstone_SSE-300_Ethos-U55   </td><td class="markdownTableBodyLeft">Cortex-M55, Ethos-U55   </td><td class="markdownTableBodyLeft"><a href="./Corstone_SSE-300_Ethos-U55_FVP_MPS3_Technical_Overview.pdf">Corstone-300 FVP Technical Overview (PDF)</a>, <a href="https://developer.arm.com/documentation/100966/1118/Arm--Corstone-SSE-300-FVP/Memory-map-overview-for-Corstone-SSE-300">Memory map overview</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">VHT_Corstone_SSE-300_Ethos-U65   </td><td class="markdownTableBodyLeft">Cortex-M55, Ethos-U65   </td><td class="markdownTableBodyLeft"><a href="./Corstone_SSE-300_Ethos-U55_FVP_MPS3_Technical_Overview.pdf">Corstone-300 FVP Technical Overview (PDF)</a>, <a href="https://developer.arm.com/documentation/100966/1118/Arm--Corstone-SSE-300-FVP/Memory-map-overview-for-Corstone-SSE-300">Memory map overview</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">VHT_Corstone_SSE-310   </td><td class="markdownTableBodyLeft">Cortex-M85, Ethos-U55   </td><td class="markdownTableBodyLeft"><a href="./Corstone_SSE-310_FVP_Technical_Overview.pdf">Corstone-310 FVP Technical Overview (PDF)</a>, <a href="https://developer.arm.com/documentation/100966/1118/Arm--Corstone-SSE-310-FVP/Corstone-SSE-310-FVP-memory-map-overview">Memory map overview</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">VHT_Corstone_SSE-310_Ethos-U65   </td><td class="markdownTableBodyLeft">Cortex-M85, Ethos-U65   </td><td class="markdownTableBodyLeft"><a href="./Corstone_SSE-310_FVP_Technical_Overview.pdf">Corstone-310 FVP Technical Overview (PDF)</a>, <a href="https://developer.arm.com/documentation/100966/1118/Arm--Corstone-SSE-310-FVP/Corstone-SSE-310-FVP-memory-map-overview">Memory map overview</a>   </td></tr>
</table>
<p >Additionally following FVP models are provided without support of Virtual Peripherals:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Simulation Model   </th><th class="markdownTableHeadLeft">Processor Core   </th><th class="markdownTableHeadLeft">Overview Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">FVP_Corstone-1000   </td><td class="markdownTableBodyLeft">Cortex-A35, Cortex-M0+, Cortex-M3   </td><td class="markdownTableBodyLeft"><a href="https://developer.arm.com/documentation/dai0550/">Arm Corstone-1000 for MPS3 (AppNote AN550)</a>   </td></tr>
</table>
<h1><a class="anchor" id="Execution"></a>
Execution</h1>
<p >FVP models can be executed in Linux environment by using their model names, for example <code>VHT_Corestone_SSE-300_Ethos-U55</code>, and on Windows platform the models are provided as executables files, for example <code>VHT_Corestone_SSE-300_Ethos-U55.exe</code>. See <a class="el" href="Using.html#Example">Usage Examples</a>.</p>
<h1><a class="anchor" id="Options"></a>
Command Line Options</h1>
<p >The command line options can be listed using the -help command. For example in Linux environment:</p>
<div class="fragment"><div class="line">VHT_Corstone_SSE-300_Ethos-U55 -help</div>
</div><!-- fragment --><p >The FVP models can be configured using the option <code>-f FILE</code> (or <code>--config-file FILE</code>) that specifies a file with additional configuration parameters for the target model. The available configuration options can be listed with the option <code>-l</code> (or <code>--list</code>).</p>
<h1><a class="anchor" id="Example"></a>
Usage Examples</h1>
<p >Below is an example of running a program on the AVH model for Corstone-300 with Ethos-U55 in Linux environment:</p>
<div class="fragment"><div class="line">VHT_Corstone_SSE-300_Ethos-U55 -V &quot;..\VSI\audio\python&quot; -f fvp_config.txt -a Objects\microspeech.axf --stat --simlimit 24</div>
</div><!-- fragment --><p >Where:</p><ul>
<li><code>-V</code> (or <code>--v_path</code>) specifies that path to the Python scripts for <a class="el" href="group__arm__cmvp.html">Virtual Interfaces</a>.</li>
<li><code>-f</code> (or <code>--config-file</code>) specifies the configuration file for the AVH simulation model.</li>
<li><code>-a</code> (or <code>--application</code>) specifies the firmware binary application to load and run.</li>
<li><code>--stat</code> instructs to print run statistics on simulation exit.</li>
<li><code>--simlimit</code> specifies the maximum number of seconds to simulate.</li>
</ul>
<p >The content of the <em>fvp_config.txt</em> could be: </p><div class="fragment"><div class="line"># Parameters:</div>
<div class="line"># instance.parameter=value       #(type, mode) default = &#39;def value&#39; : description : [min..max]</div>
<div class="line">#------------------------------------------------------------------------------</div>
<div class="line">core_clk.mul=32000000                                 # (int   , init-time) default = &#39;0x17d7840&#39; : Clock Rate Multiplier. This parameter is not exposed via CADI and can only be set in LISA</div>
<div class="line">mps3_board.telnetterminal0.start_telnet=0             # (bool  , init-time) default = &#39;1&#39;      : Start telnet if nothing connected</div>
<div class="line">mps3_board.uart0.out_file=-                           # (string, init-time) default = &#39;&#39;       : Output file to hold data written by the UART (use &#39;-&#39; to send all output to stdout)</div>
<div class="line">mps3_board.visualisation.disable-visualisation=1      # (bool  , init-time) default = &#39;0&#39;      : Enable/disable visualisation</div>
<div class="line">#------------------------------------------------------------------------------</div>
</div><!-- fragment --><p >Where:</p><ul>
<li><b>core_clk.mul=32000000</b> specifies the virtual time, in this case 32MHz CPU clock.</li>
<li><b>mps3_board.telnetterminal0.start_telnet=0</b> disables the Telnet connectivity.</li>
<li><b>mps3_board.uart0.out_file=-</b> UART output is send to stdout.</li>
<li><b>mps3_board.visualisation.disable-visualisation=1</b> disables the graphical user interface of the AVH.</li>
</ul>
<h2><a class="anchor" id="autotoc_md0"></a>
Execution stop</h2>
<p >Embedded applications typically run with an infinite loop that ensures continuous program execution. But for executing regression tests as part of Continuous Integration (CI) workflows it is often required that program execution is stopped after a test is completed, so that the next test can be started.</p>
<p >FVP models have <code>shutdown_on_eot</code> parameter that enables simple implementation of such program exit. The parameter should be set in the model configuration file (<em>fvp_config.txt</em> explained above), for example for VHT_Corstone_SSE-300:</p>
<div class="fragment"><div class="line">mps3_board.uart0.shutdown_on_eot=1   # (bool, init-time) default = &#39;0&#39; : Shutdown simulation when a EOT (ASCII 4) char is transmitted (useful for regression tests when semihosting is not available)</div>
</div><!-- fragment --><p >And then to trigger the shutdown, a EOT (ASCII 4) symbol can be transmitted to the corresponding serial interface from the program. The code below demonstrates an example, where the execution is stopped after target execution count is achieved. In this implementation the STDIO is assumed to be retargeted to the UART0:</p>
<div class="fragment"><div class="line">while (1)  {</div>
<div class="line">  printf (&quot;Hello World %d\r\n&quot;, count);</div>
<div class="line">  if (count &gt; 100) printf (&quot;\x04&quot;);  // EOT (0x04) stops simulation</div>
<div class="line">  count++;</div>
<div class="line">  osDelay (1000);</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
	Copyright &copy; 2021-2022 Arm Limited (or its affiliates). All rights reserved.
	<!-- Use script below for auto-inserting date, project name, version, etc  -->
	<!-- <script type="text/javascript">
        writeFooter.call(this);
    </script> -->
    </li>
  </ul>
</div>
</body>
</html>

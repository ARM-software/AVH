<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Using Arm VHT AMI</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="printComponentTabs.js"></script>
<script type="text/javascript" src="footer.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 55px;">
  <td style="padding: 1em;"id="projectlogo"><img alt="Logo" src="arm.png"/></td>
  <td style="padding-left: 2em; padding-bottom: 1em;padding-top: 1em;">
   <div id="projectname">Orta
   &#160;<span id="projectnumber">Version 0.2</span>
   </div>
   <div id="projectbrief">Infrastructure Service and Tool Integration</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="Compnav" class="tabs1">
    <ul class="tablist">
      <script type="text/javascript">
		<!--
		writeComponentTabs.call(this);
		//-->
      </script>
	  </ul>
</div>
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Usage&#160;and&#160;Description</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('vht_aws.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Using Arm VHT AMI </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_src_aws"></a> The <b>Arm VHT AMI</b> is powered by <a href="https://aws.amazon.com/">Amazon Web Services</a> (AWS) and gives you access to a ready-to-use <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AMIs.html">Amazon Machine Image</a> (AMI) that is a configured Amazon EC2 Linux instance with Arm VHT Systems, compiler, and other tools.</p>
<dl class="section note"><dt>Note</dt><dd>Arm VHT in <a href="https://aws.amazon.com/marketplace">AWS Marketplace</a> is not yet available, but until it is ready the Arm VHT AMI can be shared privately to closed beta users. During closed beta we need therefore your AWS Account number and GitHub user name.</dd></dl>
<p>The Arm VHT AMI solution enables many concurrent instances that let you accelerate test and verification workflow. AMI is also highly integrated in platforms such as GitHub, making it ideal for modern DevOps.</p>
<p>The following AWS tutorials help you to get started:</p>
<ul>
<li><a href="https://aws.amazon.com/premiumsupport/knowledge-center/create-and-activate-aws-account/">How do I create and activate a new AWS account?</a></li>
<li><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EC2_GetStarted.html">Tutorial: Get started with Amazon EC2 Linux instances</a></li>
</ul>
<h1><a class="anchor" id="access"></a>
Access the Arm VHT AMI</h1>
<p>In the AWS EC2 Management Console, set the region to <b>N. Virginia (us-east-1)</b> which is currently the only region that hosts the "Orta-Beta" images. To access the image:</p><ul>
<li>Select in the AWS EC2 Management Console from "All services" <b>Compute - EC2</b> which opens the AWS EC2 Management Console.</li>
<li>In the AWS EC2 Management Console select <b>Images - AMIs</b>.</li>
<li>Then select <b>Private images</b> as filter. An Orta Beta AMI should be visible (details may change the AMI gets updated) as shown below.</li>
</ul>
<p><img src="Access_AMI.png" alt="" class="inline" title="EC2 Images - AMIs"/></p>
<dl class="section note"><dt>Note</dt><dd>The private AMI is region specific so <b>if you are not in region N. Virginia</b> it will not appear.</dd></dl>
<h1><a class="anchor" id="launch"></a>
Launch the Arm VHT AMI</h1>
<p>There are two ways to launch an EC2 instance based on the Orta AMI, using the AWS Console or using a command line script.</p>
<h2><a class="anchor" id="console"></a>
Launch via AWS Console</h2>
<p>The following steps launch <b>Arm VHT AMI</b> (currently named Orta-beta-phase2) from the AWS Console:</p>
<ol type="1">
<li><b>Choose AMI:</b> Select the AMI <b>Arm VHT AMI</b> (currently named Orta-beta-phase2) and click <b>Launch</b>.</li>
<li><b>Choose an Instance Type:</b> Select <em>t3.medium</em> (2 vCPUs, 4 GiB memory) is recommended. An instance with more resources may improve performance.</li>
<li><b>Configure Instance Details:</b> Under Network select a VPC. Note: a public IP address is required for SSH access. <br  />
</li>
<li><b>Add Storage:</b> The default storage 24 GiB is sufficient for most applications. Optionally, this can be increased if needed.</li>
<li><b>Add Tags:</b> This is optional, however adding the <b>Key=Name</b> with a meaningful <b>Value</b> helps you to identify the EC2 instance.</li>
<li><b>Configure Security Group:</b> Set Type: SSH, Protocol: TCP, Port Range: 22, Source: My IP (or Anywhere) to allow access from your IP address.</li>
<li><b>Review Instance Launch:</b> allows you to verify the setup. Then click <b>Launch</b></li>
</ol>
<p>You may then select an existing key pair or create a new key pair. When an existing key pair is selected, confirm in the dialog the check box <em>I acknowledge...</em>. To finally start, click <b>Launch Instances</b>.</p>
<p><img src="select_existing_key.png" alt="" class="inline" title="Select key pair"/></p>
<h2><a class="anchor" id="script"></a>
Launch via Command Line Script</h2>
<p>The second way to launch the Arm Orta AMI is using a command line script.</p>
<p>The script will be provided in GitHub at (location to be determined).</p>
<h1><a class="anchor" id="connect"></a>
Connect to the EC2 Instance</h1>
<p>There are multiple ways to connect to the Amazon EC2 Linux instance that runs Arm VHT. For more information refer to:</p><ul>
<li><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AccessingInstances.html?icmpid=docs_ec2_console">Connect to your Linux instance</a></li>
</ul>
<h2><a class="anchor" id="use_ssh"></a>
Using SSH</h2>
<p>The connect via the Secure Shell (SSH) client of your computer, use the following command:</p>
<div class="fragment"><div class="line">$ ssh  -i &lt;path&gt;/your_key.pem ubuntu@&lt;Public IPv4 DNS&gt;</div>
</div><!-- fragment --><p> <b>Where:</b></p><ul>
<li><b>ssh</b> is the SSH command</li>
<li>option <b>-i</b> specifies the location of the AWS private key file that has the file extension *.pem.</li>
<li><b>ubuntu</b> is the user name of the Amazon EC2 Ubuntu Linux instance.</li>
<li>**&lt;Public IPv4 DNS&gt;** is the public address typically in the format: ec2-*nn*-*nn*-*nn*-*nn*.compute-1.amazonaws.com</li>
</ul>
<p>You can review this details also under the AWS EC2 Management Console under <b>EC2 - Instances - &lt;select instance&gt; - Connect</b> and then select the tab <b>SSH Client</b>.</p>
<h2><a class="anchor" id="use_vnc"></a>
Using VNC</h2>
<p>Some applications may require a display. <a href="https://de.wikipedia.org/wiki/Virtual_Network_Computing">Virtual Network Computing</a> (VNC) is available in the Arm VHT AMI and can be used as a remote desktop.</p>
<p>First, setup VNC password. </p><div class="fragment"><div class="line">$ vncpasswd 0 i - </div>
</div><!-- fragment --><p> When prompted, enter a password. A read-only password is not required.</p>
<p>To start VNC every time the machine is rebooted enable it to start on boot: </p><div class="fragment"><div class="line">$ sudo systemctl enable vncserver@1.service</div>
</div><!-- fragment --><p> To start VNC now (1 time, without rebooting) use: </p><div class="fragment"><div class="line">$ sudo systemctl start vncserver@1.service</div>
</div><!-- fragment --><p> To disable VNC from running on future machine restarts run: </p><div class="fragment"><div class="line">$ sudo systemctl disable vncserver@1.service</div>
</div><!-- fragment --><p> To stop VNC now use: </p><div class="fragment"><div class="line">$ sudo systemctl stop vncserver@1.service</div>
</div><!-- fragment --><p> If VNC is running on the EC2 instance a VNC client can be used to connect. The easiest way to connect is by forwarding the VNC port using ssh. With this technique no additional ports need to be opened in the EC2 security group.</p>
<p>To connect use SSH port forwarding to avoid opening any other ports in the AWS security group </p><div class="fragment"><div class="line">$ ssh -i /path/to/aws.pem -L 5901:localhost:5901 ubuntu@@&lt;EC2-IP-addr&gt;</div>
</div><!-- fragment --><p>Open a VNC viewer, such as TigerVNC. Enter the VNC server as localhost:5901 and click Connect. It should ask for the previously set password and then present a remote desktop.</p>
<p><img src="Connect_VNC.png" alt="" class="inline" title="Connect VNC Viewer"/></p>
<h2><a class="anchor" id="use_code_server"></a>
Using Code Server</h2>
<p>Code Server is automatically running on the AMI on port 8080. To connect use port forwarding to ssh into the EC2 instance. </p><div class="fragment"><div class="line">$ ssh -i /path/to/aws.pem -L 8080:localhost:8080 ubuntu@@&lt;EC2-IP-addr&gt;</div>
</div><!-- fragment --><p> Using a local browser connect to <a href="http://localhost:8080">http://localhost:8080</a> and you should see Visual Studio Code appear in the browser.</p>
<h1><a class="anchor" id="run_example"></a>
Running Micro Speech</h1>
<p>Run the micro speech example. Connect to the EC2 instance using ssh as described above and then get the example, compile, and run. </p><div class="fragment"><div class="line">$ git clone https://github.com/MDK-Packs/VHT-TFLmicrospeech.git</div>
</div><!-- fragment --><p>For shared private projects your GitHub Username and Password key will be required to clone.</p>
<div class="fragment"><div class="line">$ cd ./VHT-TFLmicrospeech/Platform_FVP_Corstone_SSE-300_Ethos-U55</div>
<div class="line"> </div>
<div class="line">$ cp_install.sh packlist</div>
<div class="line"> </div>
<div class="line">$ cbuild.sh microspeech.Example.cprj</div>
<div class="line"> </div>
<div class="line">$ ./run_example.sh</div>
</div><!-- fragment --><p>The output should display:</p>
<div class="fragment"><div class="line">Fast Models [11.15.14 (Jun 23 2021)]</div>
<div class="line">Copyright 2000-2021 ARM Limited.</div>
<div class="line">All Rights Reserved.</div>
<div class="line"> </div>
<div class="line">telnetterminal0: Listening for serial connection on port 5000</div>
<div class="line">telnetterminal1: Listening for serial connection on port 5001</div>
<div class="line">telnetterminal2: Listening for serial connection on port 5002</div>
<div class="line">telnetterminal5: Listening for serial connection on port 5003</div>
<div class="line"> </div>
<div class="line">    Ethos-U rev f19bc8d4 --- Apr 23 2021 13:24:11</div>
<div class="line">    (C) COPYRIGHT 2019-2021 Arm Limited</div>
<div class="line">    ALL RIGHTS RESERVED</div>
<div class="line"> </div>
<div class="line">Heard yes (147) @1000ms</div>
<div class="line">Heard no (141) @5600ms</div>
<div class="line">Heard yes (149) @9100ms</div>
<div class="line">Heard no (142) @13600ms</div>
<div class="line">Heard yes (149) @17100ms</div>
<div class="line"> </div>
<div class="line">Info: Simulation is stopping. Reason: Cycle limit has been exceeded.</div>
<div class="line"> </div>
<div class="line">Info: /OSCI/SystemC: Simulation stopped by user.</div>
<div class="line">[warning ][main@0][01 ns] Simulation stopped by user</div>
<div class="line"> </div>
<div class="line">--- cpu_core statistics: ----------------------------------------------------</div>
<div class="line">Simulated time                          : 20.000002s</div>
<div class="line">User time                               : 396.865593s</div>
<div class="line">System time                             : 1.924400s</div>
<div class="line">Wall time                               : 398.550649s</div>
<div class="line">Performance index                       : 0.05</div>
<div class="line">cpu_core.cpu0                           :  10.03 MIPS (  4000000000 Inst)</div>
<div class="line">----------------------------------------------------------------------------</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">Infrastructure</a></li>
    <li class="footer">
	Copyright &copy; 2021 Arm Limited (or its affiliates). All rights reserved.
	<!-- Use script below for auto-inserting date, project name, version, etc  -->
	<!-- <script type="text/javascript">
        writeFooter.call(this);
    </script> -->
    </li>
  </ul>
</div>
</body>
</html>
